/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*
 * CutJS
 * Copyright (c) 2013-2014 Ali Shakiba, Piqnt LLC and other contributors
 * Available under the MIT license
 * @license
 */

/*
 * ExtraJS
 * Copyright (c) 2013-2014 Ali Shakiba, Piqnt LLC and other contributors
 * Available under the MIT license
 * @license
 */

function checkDomain(e){var t=document.location.hostname;for(var n=0;n<e.length;n++)if(t.indexOf(e[n])!=-1)return!0}function Cut(){Cut._stats.create++,this._id="",this._visible=!0,this._parent=null,this._next=null,this._prev=null,this._first=null,this._last=null,this._pin=new Cut.Pin(this),this._outs=[],this._tickBefore=[],this._tickAfter=[],this._alpha=1}var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){}),define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c});const DEBUG=!1;!checkDomain(["piqnt.com"]),define("def",function(){}),DEBUG=(typeof DEBUG=="undefined"||DEBUG)&&console,Cut._create=function(){if(typeof Object.create=="function")return function(){return Object.create.apply(null,arguments)};var e=function(){};return function(t){if(arguments.length>1)throw Error("Second argument is not supported!");if(t===null||typeof t!="object")throw Error("Invalid prototype!");return e.prototype=t,new e}}(),Cut._stats={create:0,tick:0,paint:0,paste:0},Cut.create=function(){return new Cut},Cut.prototype.render=function(e){Cut._stats.tick=Cut._stats.paint=Cut._stats.paste=0;var t=Cut._now(),n=this._lastTime?t-this._lastTime:0;this._lastTime=t,this._tick(n),this._paint(e),Cut._stats.fps=1e3/(Cut._now()-t)},Cut.prototype.MAX_ELAPSE=Infinity,Cut.prototype._tick=function(e){if(!this._visible)return;e>this.MAX_ELAPSE&&(e=this.MAX_ELAPSE),this._pin.tick();var t=this._tickBefore.length;for(var n=0;n<t;n++)Cut._stats.tick++,this._tickBefore[n].call(this,e);var r,i=this._first;while(r=i)i=r._next,r._tick(e);var t=this._tickAfter.length;for(var n=0;n<t;n++)Cut._stats.tick++,this._tickAfter[n].call(this,e)},Cut.prototype.tick=function(e,t){t?this._tickBefore.push(e):this._tickAfter.push(e)},Cut.prototype._paint=function(e){if(!this._visible)return;Cut._stats.paint++;var t=this.matrix();e.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty),this._alpha=this._pin._alpha*(this._parent?this._parent._alpha:1);var n=this._pin._textureAlpha*this._alpha;e.globalAlpha!=n&&(e.globalAlpha=n);var r=this._outs.length;for(var i=0;i<r;i++)this._outs[i].paste(e);e.globalAlpha!=this._alpha&&(e.globalAlpha=this._alpha);var s,o=this._first;while(s=o)o=s._next,s._paint(e)},Cut.prototype.toString=function(){return"["+this._id+"]"},Cut.prototype.id=function(e){return arguments.length?(this._id=e,this):this._id},Cut.prototype.attr=function(e,t){return arguments.length<2?this._attrs?this._attrs[e]:undefined:((this._attrs?this._attrs:this._attrs={})[e]=t,this)},Cut.prototype.on=Cut.prototype.listen=function(e,t){if(typeof t!="function")return this;e=(Cut._isArray(e)?e.join(" "):e).split(/\s+/);for(var n=0;n<e.length;n++){var r=e[n];r&&(this._listeners=this._listeners||{},this._listeners[r]=this._listeners[r]||[],this._listeners[r].push(t))}return this},Cut.prototype.listeners=function(e){return this._listeners&&this._listeners[e]},Cut.prototype.publish=function(e,t){var n=this.listeners(e);if(!n||!n.length)return!1;for(var r=0;r<n.length;r++)n[r].apply(this,t);return!0},Cut.prototype.visit=function(e){var t=e.reverse,n=e.visible;if(e.start&&e.start(this))return;var r,i=t?this.last(n):this.first(n);while(r=i){i=t?r.prev(n):r.next(n);if(r.visit(e,t))return!0}return e.end&&e.end(this)},Cut.prototype.visible=function(e){return arguments.length?(this._visible=e,this._parent&&(this._parent._ts_children=Cut._TS++),this._ts_pin=Cut._TS++,this.touch(),this):this._visible},Cut.prototype.hide=function(){return this.visible(!1)},Cut.prototype.show=function(){return this.visible(!0)},Cut.prototype.parent=function(){return this._parent},Cut.prototype.next=function(e){var t=this._next;while(t&&e&&!t._visible)t=t._next;return t},Cut.prototype.prev=function(e){var t=this._prev;while(t&&e&&!t._visible)t=t._prev;return t},Cut.prototype.first=function(e){var t=this._first;while(t&&e&&!t._visible)t=t._next;return t},Cut.prototype.last=function(e){var t=this._last;while(t&&e&&!t._visible)t=t._prev;return t},Cut.prototype.append=function(){for(var e=0;e<arguments.length;e++){if(!Cut._isCut(arguments[e]))throw"It is not a Cut node!";arguments[e].appendTo(this)}return this},Cut.prototype.prepend=function(){for(var e=0;e<arguments.length;e++){if(!Cut._isCut(arguments[e]))throw"It is not a Cut node!";arguments[e].prependTo(this)}return this},Cut.prototype.appendTo=function(e){if(!e)throw"Parent is null!";if(!Cut._isCut(e))throw"It is not a Cut node!";return this.remove(),e._last&&(e._last._next=this,this._prev=e._last),this._parent=e,e._last=this,e._first||(e._first=this),this._ts_parent=Cut._TS++,e._ts_children=Cut._TS++,e.touch(),this},Cut.prototype.prependTo=function(e){if(!e)throw"Parent is null!";if(!Cut._isCut(e))throw"It is not a Cut node!";return this.remove(),e._first&&(e._first._prev=this,this._next=e._first),this._parent=e,e._first=this,e._last||(e._last=this),this._ts_parent=Cut._TS++,e._ts_children=Cut._TS++,e.touch(),this},Cut.prototype.insertNext=function(){if(arguments.length)for(var e=0;e<arguments.length;e++){if(!Cut._isCut(arguments[e]))throw"It is not a Cut node!";arguments[e]&&arguments[e].insertAfter(this)}return this},Cut.prototype.insertPrev=function(){if(arguments.length)for(var e=0;e<arguments.length;e++){if(!Cut._isCut(arguments[e]))throw"It is not a Cut node!";arguments[e]&&arguments[e].insertBefore(this)}return this},Cut.prototype.insertBefore=function(e){if(!e)throw"Next is null!";if(!Cut._isCut(e))throw"It is not a Cut node!";this.remove();var t=e._parent,n=e._prev;e._prev=this,n&&(n._next=this)||t&&(t._first=this),this._parent=t,this._prev=n,this._next=e,this._ts_parent=Cut._TS++,this.touch()},Cut.prototype.insertAfter=function(e){if(!e)throw"Prev is null!";if(!Cut._isCut(e))throw"It is not a Cut node!";this.remove();var t=e._parent,n=e._next;e._next=this,n&&(n._prev=this)||t&&(t._last=this),this._parent=t,this._prev=e,this._next=n,this._ts_parent=Cut._TS++,this.touch()},Cut.prototype.remove=function(){if(arguments.length){for(var e=0;e<arguments.length;e++){if(!Cut._isCut(arguments[e]))throw"It is not a Cut node!";arguments[e]&&arguments[e].remove()}return this}return this._prev&&(this._prev._next=this._next),this._next&&(this._next._prev=this._prev),this._parent&&(this._parent._first===this&&(this._parent._first=this._next),this._parent._last===this&&(this._parent._last=this._prev)),this._parent&&(this._parent._ts_children=Cut._TS++,this._parent.touch()),this._prev=this._next=this._parent=null,this._ts_parent=Cut._TS++,this},Cut.prototype.empty=function(){var e,t=this._first;while(e=t)t=e._next,e._prev=e._next=e._parent=null;return this._first=this._last=null,this._ts_children=Cut._TS++,this.touch(),this},Cut.prototype.touch=function(){return this._ts_touch=Cut._TS++,this._parent&&this._parent.touch(),this},Cut.prototype.pin=function(){if(!arguments.length)return this._pin;var e=this._pin.update.apply(this._pin,arguments);return e===this._pin?this:e},Cut.prototype.pinChildren=function(e){return e&&Cut._extend(this._pinAll=this._pinAll||{},e),this._pinAllTicker?this:(this._pinAllTicker=function(){if(this._mo_pinAll==this._ts_children)return;this._mo_pinAll=this._ts_children;var e,t=this.first(!0);while(e=t)t=e.next(!0),e.pin(this._pinAll)},this.tick(this._pinAllTicker,!0),this)},Cut.prototype.matrix=function(){return this._pin.absoluteMatrix(this,this._parent?this._parent._pin:null)},Cut.prototype.tween=function(e,t){return(this._tween||(this._tween=new Cut.Tween(this))).tween(e,t)},Cut.Tween=function(e){var t=this;this._owner=e,this._queue=[],this._next=null,e.tick(function(n){if(!t._queue.length)return;this.touch();var r=t._queue[0];r.time?r.time+=n:r.time=1;if(r.time<r.delay)return;var i=(r.time-r.delay)/r.duration,s=i>=1;i=i>1?1:i,i=r.easing?r.easing(i):i;if(!r.start){r.start={};for(var o in r.end){var u=e.pin(o);r.start[o]=u||0}}for(var o in r.start){var a=r.start[o],f=r.end[o];e.pin(o,a+(f-a)*i)}s&&(t._queue.shift(),r.then&&r.then.call(e))},!0)},Cut.Tween.prototype.tween=function(e,t){return this._next={id:Cut._TS++,end:{},duration:e||400,delay:t||0},this},Cut.Tween.prototype.pin=function(e){this._next!==this._queue[this._queue.length-1]&&(this._owner.touch(),this._queue.push(this._next));var t=this._next.end;return arguments.length===1?Cut._extend(t,arguments[0]):arguments.length===2&&(t[arguments[0]]=arguments[1]),this},Cut.Tween.prototype.clear=function(e){var t;while(t=this._queue.shift())e&&this._owner.pin(t.end);return this},Cut.Tween.prototype.then=function(e){return this._next.then=e,this},Cut.Tween.prototype.easing=function(e){return this._next.easing=e,this},Cut.root=function(e,t){return new Cut.Root(e,t)},Cut.Root=function(e,t){Cut.String.prototype._super.apply(this,arguments),this._paused=!0,this._render=t,this._request=e;var n=this,r=function(){if(n._paused===!0)return;n._mo_touch=n._ts_touch,n._render(),n.request(),n._mo_touch==n._ts_touch&&n.pause()};this.request=function(){this._request.call(null,r)},this.on("viewport",function(e,t){return this._size={width:e,height:t},this._updateViewbox(),!0})},Cut.Root.prototype=Cut._create(Cut.prototype),Cut.Root.prototype._super=Cut,Cut.Root.prototype.constructor=Cut.Root,Cut.Root.prototype.viewbox=function(e,t,n){return this._viewbox={width:e,height:t,mode:typeof n=="undefined"?"in":n},this._updateViewbox(),this},Cut.Root.prototype._updateViewbox=function(){var e=this._viewbox,t=this._size;!t||(e?this.pin({width:e.width,height:e.height,resizeMode:e.mode,resizeWidth:t.width,resizeHeight:t.height}):this.pin({width:t.width,height:t.height}))},Cut.Root.prototype.start=function(){return this.resume()},Cut.Root.prototype.resume=function(e){if(this._paused||e)this._paused=!1,this.request();return this},Cut.Root.prototype.pause=function(){return this._paused=!0,this},Cut.Root.prototype.touch=function(){return this.resume(),Cut.prototype.touch.apply(this,arguments)},Cut.image=function(e){var t=new Cut.Image;return e&&t.setImage(e),t},Cut.Image=function(){Cut.Image.prototype._super.apply(this,arguments)},Cut.Image.prototype=Cut._create(Cut.prototype),Cut.Image.prototype._super=Cut,Cut.Image.prototype.constructor=Cut.Image,Cut.Image.prototype.setImage=function(e){return this._outs[0]=Cut.Out.select(e),this.pin({width:this._outs[0]?this._outs[0].dWidth():0,height:this._outs[0]?this._outs[0].dHeight():0}),this},Cut.Image.prototype.cropX=function(e,t){return this.setImage(this._outs[0].cropX(e,t))},Cut.Image.prototype.cropY=function(e,t){return this.setImage(this._outs[0].cropY(e,t))},Cut.anim=function(e,t){var n=(new Cut.Anim).setFrames(e).gotoFrame(0);return t&&n.fps(t),n},Cut.Anim=function(){Cut.Anim.prototype._super.apply(this,arguments),this._fps=Cut.Anim.FPS,this._ft=1e3/this._fps,this._time=0,this._frame=0,this._frames=[],this._labels={},this.tick(function(){if(this._time&&this._frames.length>1){var e=Cut._now()-this._time;if(e>=this._ft){var t=e<2*this._ft?1:Math.floor(e/this._ft);this._time+=t*this._ft,this.moveFrame(t),this._repeat&&(this._repeat-=t)<=0&&(this.stop(),this._callback&&this._callback())}this.touch()}},!1)},Cut.Anim.prototype=Cut._create(Cut.prototype),Cut.Anim.prototype._super=Cut,Cut.Anim.prototype.constructor=Cut.Anim,Cut.Anim.FPS=22,Cut.Anim.prototype.fps=function(e){return arguments.length?(this._fps=e||Cut.Anim.FPS,this._ft=1e3/this._fps,this):this._fps},Cut.Anim.prototype.setFrames=function(e){this._time=this._time||0,this._frame=0,this._frames=[],this._labels={},e=Cut.Out.select(e,!0);if(e&&e.length)for(var t=0;t<e.length;t++){var n=e[t];this._frames.push(n),this._labels[n.name]=t}return this},Cut.Anim.prototype.length=function(){return this._frames?this._frames.length:0},Cut.Anim.prototype.gotoFrame=function(e,t){return e=Cut.Math.rotate(e,this._frames.length)|0,this._frame=e,t=t||!this._outs[0],this._outs[0]=this._frames[this._frame],t&&this.pin({width:this._outs[0].dWidth(),height:this._outs[0].dHeight()}),this._ts_frame=Cut._TS++,this.touch(),this},Cut.Anim.prototype.moveFrame=function(e){return this.gotoFrame(this._frame+e)},Cut.Anim.prototype.gotoLabel=function(e,t){return this.gotoFrame(this._labels[e]||0,t)},Cut.Anim.prototype.repeat=function(e,t){return this._repeat=e*this._frames.length-1,this._callback=t,this.play(),this},Cut.Anim.prototype.play=function(e){return arguments.length?(this.gotoFrame(e),this._time=Cut._now()):this._time||(this._time=Cut._now()),this},Cut.Anim.prototype.stop=function(e){return this._time=null,arguments.length&&this.gotoFrame(e),this},Cut.string=function(e){return(new Cut.String).setFont(e)},Cut.String=function(){Cut.String.prototype._super.apply(this,arguments),this.row()},Cut.String.prototype=Cut._create(Cut.prototype),Cut.String.prototype._super=Cut,Cut.String.prototype.constructor=Cut.String,Cut.String.prototype.setFont=function(e){return this._font=e,this},Cut.String.prototype.setValue=function(e){if(this.value===e)return this;this.value=e,typeof e!="string"&&!Cut._isArray(e)&&(e+="");var t=this._first;for(var n=0;n<e.length;n++){var r=this._font+e[n];t?t.setImage(r).show():t=Cut.image(r).appendTo(this),t=t._next}while(t)t.hide(),t=t._next;return this},Cut.row=function(e){return Cut.create().row(e)},Cut.prototype.row=function(e){return this.box("row").pinChildren({alignY:e}),this},Cut.column=function(e){return Cut.create().column(e)},Cut.prototype.column=function(e){return this.box("column").pinChildren({alignX:e}),this},Cut.box=function(e){return(new Cut.create).box()},Cut.prototype.box=function(e){return this._boxTicker?this:(this._padding=0,this.padding=function(e){return this._padding=e,this},this._spacing=0,this.spacing=function(e){return this._spacing=e,this},this._boxTicker=function(){if(this._mo_box==this._ts_touch)return;this._mo_box=this._ts_touch;var t=0,n=0,r,i=this.first(!0),s=!0;while(r=i)i=r.next(!0),r.pin().relativeMatrix(),e=="column"?(!s&&(n+=this._spacing||0),r.pin("offsetY")!=n&&r.pin("offsetY",n),t=Math.max(t,r._pin._boundWidth),n+=r._pin._boundHeight):e=="row"?(!s&&(t+=this._spacing||0),r.pin("offsetX")!=t&&r.pin("offsetX",t),t+=r._pin._boundWidth,n=Math.max(n,r._pin._boundHeight)):(t=Math.max(t,r._pin._boundWidth),n=Math.max(n,r._pin._boundHeight)),s=!1;t+=this._padding*2,n+=this._padding*2,this.pin("width")!=t&&this.pin("width",t),this.pin("height")!=n&&this.pin("height",n)},this.tick(this._boxTicker),this)},Cut.Image.prototype.tile=function(e){function r(e){return n._outs[e]||(n._outs[e]=t.clone())}if(this._tileTicker)return this;var t=null,n=this;return this._tileTicker=function(){if(this._mo_tile==this._ts_touch)return;this._mo_tile=this._ts_touch,t=t||this._outs[0].clone();var n=t._left,i=t._right,s=t._top,o=t._bottom,u=t.dWidth()-n-i,a=t.dHeight()-s-o,f=this.pin("width");f=e?f:f-n-i;var l=this.pin("height");l=e?l:l-s-o;var c=e?-n:0,h=e?-s:0,p=0;s&&n&&r(p++).cropX(n,0).cropY(s,0).offset(c,h),o&&n&&r(p++).cropX(n,0).cropY(o,a+s).offset(c,h+l+s),s&&i&&r(p++).cropX(i,u+n).cropY(s,0).offset(c+f+n,h),o&&i&&r(p++).cropX(i,u+n).cropY(o,a+s).offset(c+f+n,h+l+s);var d=c+n,v=f;while(v>0){var m=Math.min(u,v);v-=u;var g=h+s,y=l;while(y>0){var b=Math.min(a,y);y-=a,r(p++).cropX(m,n).cropY(b,s).offset(d,g),v<=0&&(n&&r(p++).cropX(n,0).cropY(b,s).offset(c,g),i&&r(p++).cropX(i,u+n).cropY(b,s).offset(d+m,g)),g+=b}s&&r(p++).cropX(m,n).cropY(s,0).offset(d,h),o&&r(p++).cropX(m,n).cropY(o,a+s).offset(d,g),d+=m}this._outs.length=p},this.tick(this._tileTicker),this},Cut.Image.prototype.stretch=function(e){function r(e){return n._outs[e]||(n._outs[e]=t.clone())}if(this._stretchTicker)return this;var t=null,n=this;return this._stretchTicker=function(){if(this._mo_stretch==this._pin._ts_transform)return;this._mo_stretch=this._pin._ts_transform,t=t||this._outs[0].clone();var n=t._left,i=t._right,s=t._top,o=t._bottom,u=t.dWidth(),a=t.dHeight(),f=this.pin("width"),l=this.pin("height");f=e?f+n+i:Math.max(f,n+i),l=e?l+s+o:Math.max(l,s+o);var c=0;s&&n&&r(c++).cropX(n,0).cropY(s,0).offset(0,0),o&&n&&r(c++).cropX(n,0).cropY(o,a-o).offset(0,l-o),s&&i&&r(c++).cropX(i,u-i).cropY(s,0).offset(f-i,0),o&&i&&r(c++).cropX(i,u-i).cropY(o,a-o).offset(f-i,l-o),s&&r(c++).cropX(u-n-i,n).cropY(s,0).offset(n,0).dWidth(f-n-i),o&&r(c++).cropX(u-n-i,n).cropY(o,a-o).offset(n,l-o).dWidth(f-n-i),n&&r(c++).cropX(n,0).cropY(a-s-o,s).offset(0,s).dHeight(l-s-o),i&&r(c++).cropX(i,u-i).cropY(a-s-o,s).offset(f-i,s).dHeight(l-s-o),r(c++).cropX(u-n-i,n).cropY(a-s-o,s).offset(n,s).dWidth(f-n-i).dHeight(l-s-o),this._outs.length=c},this.tick(this._stretchTicker),this},Cut._images={},Cut.loadImages=function(e,t){function a(){DEBUG&&console.log("Loading image completed."),l()}function f(e){DEBUG&&console.log("Error loading image: "+e),l()}function l(){--n<=0&&t&&t()}var n=0,r=!0,i=Cut._textures;for(var s in i)if(i[s].getImagePath()){n++;var o=i[s].getImagePath(),u=e(o,a,f);Cut.addImage(u,o),r=!1}r&&(DEBUG&&console.log("No image to load."),t&&t())},Cut.getImage=function(e){return Cut._images[e]},Cut.addImage=function(e,t){return Cut._images[t]=e,this},Cut._textures={},Cut.addTexture=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];Cut._textures[t.name]=new Cut.Texture(t)}return this},Cut.Texture=function(e){function r(){return n||(n=Cut.getImage(e.imagePath)),n}function s(t){if(!t)return t;if(t.isCutout)return t;typeof e.map=="function"?t=e.map(t):typeof e.filter=="function"&&(t=e.filter(t));var n=e.ratio||1;n!=1&&(t.x*=n,t.y*=n,t.width*=n,t.height*=n,t.top*=n,t.bottom*=n,t.left*=n,t.right*=n);var r=e.trim||0;return r&&(t.x+=r,t.y+=r,t.width-=2*r,t.height-=2*r,t.top-=r,t.bottom-=r,t.left-=r,t.right-=r),t}function o(t){return t.isCutout||(t=new Cut.Out(t,r,e.imageRatio)),t}e.cutouts=e.cutouts||[];var t={},n=null;this.getImagePath=function(){return e.imagePath};for(var i=0;i<e.cutouts.length;i++)s(e.cutouts[i]);this.select=function(n,r){if(!r){var i=n+"?",u=t[i];if(typeof u=="undefined"){for(var a=0;a<e.cutouts.length;a++){var f=e.cutouts[a];if(f.name==n){u=f;break}}t[i]=u}!u&&e.factory&&(u=s(e.factory(n)));if(!u)throw"Cutout not found: '"+e.name+":"+n+"'";return o(u)}var i=n+"*",l=t[i];if(typeof l=="undefined"){l=[];var c=n.length;for(var a=0;a<e.cutouts.length;a++){var f=e.cutouts[a];f.name&&f.name.substring(0,c)==n&&l.push(e.cutouts[a])}t[i]=l}if(!l.length)throw"Cutouts not found: '"+e.name+":"+n+"'";for(var a=0;a<l.length;a++)l[a]=o(l[a]);return l}},Cut.Out=function(e,t,n){this.isCutout=!0,this._data=e,this.name=e.name,this._image=t,this._ratio=n||1,this._sx=e.x*this._ratio,this._sy=e.y*this._ratio,this._sw=e.width*this._ratio,this._sh=e.height*this._ratio,this._dx=0,this._dy=0,this._dw=e.width,this._dh=e.height,this._top=e.top||0,this._bottom=e.bottom||0,this._left=e.left||0,this._right=e.right||0},Cut.Out.prototype.clone=function(){return new Cut.Out(this._data,this._image,this._ratio)},Cut.Out.prototype.dWidth=function(e){return arguments.length?(this._dw=e,this):this._dw},Cut.Out.prototype.dHeight=function(e){return arguments.length?(this._dh=e,this):this._dh},Cut.Out.prototype.cropX=function(e,t){return t=t||0,e=Math.min(e,this._data.width-t),this._dw=e,this._sw=e*this._ratio,this._sx=(this._data.x+t)*this._ratio,this},Cut.Out.prototype.cropY=function(e,t){return t=t||0,e=Math.min(e,this._data.height-t),this._dh=e,this._sh=e*this._ratio,this._sy=(this._data.y+t)*this._ratio,this},Cut.Out.prototype.offset=function(e,t){return this._dx=e,this._dy=t,this},Cut.Out.prototype.paste=function(e){Cut._stats.paste++;var t=this._image();try{t&&e.drawImage(t,this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh)}catch(n){this.failed||console.log("Unable to paste: ",this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh,t),this.failed=!0}},Cut.Out.prototype.toString=function(){return"["+this.name+": "+this._dw+"x"+this._dh+"]"},Cut.Out.select=function(e,t){if(typeof e!="string")return e;var n=e.indexOf(":");if(n<0)throw"Invalid selector: '"+e+"'";var r=[e.slice(0,n),e.slice(n+1)],i=Cut._textures[r[0]];if(i==null)throw"Texture not found: '"+e+"'";return i.select(r[1],t)},Cut.drawing=function(){return Cut.image(Cut.Out.drawing.apply(Cut.Out,arguments))},Cut.Out.drawing=function(e,t,n,r,i,s){var o=document.createElement("canvas"),u=o.getContext("2d");return typeof i!="function"&&(typeof r=="function"?typeof e=="string"?(s=i,i=r,r=1):(s=i,i=r,r=n,n=t,t=e,e=Math.random()*1e3|0):typeof n=="function"&&(s=r,i=n,r=1,n=t,t=e,e=Math.random()*1e3|0)),o.width=Math.ceil(t*r),o.height=Math.ceil(n*r),s||(s={}),s.name||(s.name=e),s.x||(s.x=0),s.y||(s.y=0),s.width||(s.width=t),s.height||(s.height=n),s=new Cut.Out(s,function(){return o},r),i.call(s,u,r),s},Cut.Pin=function(e){this._owner=e,this._parent=null,this._relativeMatrix=new Cut.Matrix,this._absoluteMatrix=new Cut.Matrix,this._boundMatrix=new Cut.Matrix,this.reset()},Cut.Pin._EMPTY={},Cut.Pin.prototype.reset=function(){this._textureAlpha=1,this._alpha=1,this._width=0,this._height=0,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewX=0,this._rotation=0,this._pivoted=!1,this._pivotX=null,this._pivotY=null,this._handled=!1,this._handleX=0,this._handleY=0,this._aligned=!1,this._alignX=0,this._alignY=0,this._offsetX=0,this._offsetY=0,this._boundX=0,this._boundY=0,this._boundWidth=this._width,this._boundHeight=this._height,this._ts_translate=Cut._TS++,this._ts_transform=Cut._TS++,this._ts_matrix=Cut._TS++},Cut.Pin.prototype.tick=function(){return this._parent=this._owner._parent&&this._owner._parent._pin,this._handled&&this._mo_handle!=this._ts_transform&&(this._mo_handle=this._ts_transform,this._ts_translate=Cut._TS++),this._aligned&&this._parent&&this._mo_align!=this._parent._ts_transform&&(this._mo_align=this._parent._ts_transform,this._ts_translate=Cut._TS++),this},Cut.Pin.prototype.toString=function(){return this._owner.id()+" ["+this._alignX+", "+this._alignY+"] ["+this._handleX+", "+this._handleY+"] ["+(this._parent?this._parent._owner.id():null)+"]"},Cut.Pin.prototype.absoluteMatrix=function(){var e=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_matrix:0);if(this._mo_abs==e)return this._absoluteMatrix;this._mo_abs=e;var t=this._absoluteMatrix;return t.copyFrom(this.relativeMatrix()),this._parent&&t.concat(this._parent._absoluteMatrix),this._ts_matrix=Cut._TS++,t},Cut.Pin.prototype.relativeMatrix=function(){var e=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_transform:0);if(this._mo_rel==e)return this._relativeMatrix;this._mo_rel=e;var t=this._relativeMatrix;return t.identity(),this._pivoted&&t.translate(-this._pivotX*this._width,-this._pivotY*this._height),t.scale(this._scaleX,this._scaleY),t.rotate(this._rotation),t.skew(this._skewX,this._skewX),this._pivoted&&t.translate(this._pivotX*this._width,this._pivotY*this._height),this.boundMatrix(),this._x=this._offsetX-this._boundX,this._y=this._offsetY-this._boundY,this._handled&&(this._x-=this._handleX*this._boundWidth,this._y-=this._handleY*this._boundHeight),this._aligned&&this._parent&&(this._parent.relativeMatrix(),this._x+=this._alignX*this._parent._width,this._y+=this._alignY*this._parent._height),t.translate(this._x,this._y),this._relativeMatrix},Cut.Pin.prototype.boundMatrix=function(){if(this._mo_bound==this._ts_transform)return;this._mo_bound=this._ts_transform;if(this._pivoted){this._boundX=0,this._boundY=0,this._boundWidth=this._width,this._boundHeight=this._height;return}var e=this._boundMatrix;e.identity(),e.scale(this._scaleX,this._scaleY),e.rotate(this._rotation),e.skew(this._skewX,this._skewX);var t,n;e.a>0&&e.c>0||e.a<0&&e.c<0?(t=0,n=e.a*this._width+e.c*this._height):(t=e.a*this._width,n=e.c*this._height),this._boundX=Math.min(t,n),this._boundWidth=Math.abs(t-n),e.b>0&&e.d>0||e.b<0&&e.d<0?(t=0,n=e.b*this._width+e.d*this._height):(t=e.b*this._width,n=e.d*this._height),this._boundY=Math.min(t,n),this._boundHeight=Math.abs(t-n)},Cut.Pin.prototype.update=function(){if(arguments.length==1&&typeof arguments[0]=="string")return this["_"+arguments[0]];this._transform_flag=!1,this._translate_flag=!1;if(arguments.length==1&&typeof arguments[0]=="object"){var e=arguments[0],t,n;for(t in e)!Cut.Pin._setters[t]&&!Cut.Pin._setters2[t]&&DEBUG&&console.log("Invalid pin: "+t+"/"+e[t]);ctx=Cut.Pin._setters;for(t in e)n=e[t],(setter=ctx[t])&&(n||n===0)&&setter.call(ctx,this,n,e);ctx=Cut.Pin._setters2;for(t in e)n=e[t],(setter=ctx[t])&&(n||n===0)&&setter.call(ctx,this,n,e)}else if(arguments.length==2&&typeof arguments[0]=="string"){var t=arguments[0],n=arguments[1];(ctx=Cut.Pin._setters)&&(setter=ctx[t])?(n||n===0)&&setter.call(ctx,this,n,Cut.Pin._EMPTY):(ctx=Cut.Pin._setters2)&&(setter=ctx[t])?(n||n===0)&&setter.call(ctx,this,n,Cut.Pin._EMPTY):DEBUG&&console.log("Invalid pin: "+t+"/"+n)}return this._translate_flag&&(this._translate_flag=!1,this._ts_translate=Cut._TS++),this._transform_flag&&(this._transform_flag=!1,this._ts_transform=Cut._TS++),this._owner&&(this._owner._ts_pin=Cut._TS++,this._owner.touch()),this},Cut.Pin._setters={alpha:function(e,t,n){e._alpha=t},textureAlpha:function(e,t,n){e._textureAlpha=t},width:function(e,t,n){e._width_=t,e._width=t,e._transform_flag=!0},height:function(e,t,n){e._height_=t,e._height=t,e._transform_flag=!0},scale:function(e,t,n){e._scaleX=t,e._scaleY=t,e._transform_flag=!0},scaleX:function(e,t,n){e._scaleX=t,e._transform_flag=!0},scaleY:function(e,t,n){e._scaleY=t,e._transform_flag=!0},skew:function(e,t,n){e._skewX=t,e._skewY=t,e._transform_flag=!0},skewX:function(e,t,n){e._skewX=t,e._transform_flag=!0},skewY:function(e,t,n){e._skewY=t,e._transform_flag=!0},rotation:function(e,t,n){e._rotation=t,e._transform_flag=!0},pivot:function(e,t,n){e._pivotX=t,e._pivotY=t,e._pivoted=!0,e._transform_flag=!0},pivotX:function(e,t,n){e._pivotX=t,e._pivoted=!0,e._transform_flag=!0},pivotY:function(e,t,n){e._pivotY=t,e._pivoted=!0,e._transform_flag=!0},offset:function(e,t,n){e._offsetX=t,e._offsetY=t,e._translate_flag=!0},offsetX:function(e,t,n){e._offsetX=t,e._translate_flag=!0},offsetY:function(e,t,n){e._offsetY=t,e._translate_flag=!0},align:function(e,t,n){this.alignX.apply(this,arguments),this.alignY.apply(this,arguments)},alignX:function(e,t,n){e._alignX=t,e._aligned=!0,e._translate_flag=!0,this.handleX(e,t,n)},alignY:function(e,t,n){e._alignY=t,e._aligned=!0,e._translate_flag=!0,this.handleY(e,t,n)},handle:function(e,t,n){this.handleX(e,t,n),this.handleY(e,t,n)},handleX:function(e,t,n){e._handleX=t,e._handled=!0,e._translate_flag=!0},handleY:function(e,t,n){e._handleY=t,e._handled=!0,e._translate_flag=!0}},Cut.Pin._setters2={resizeMode:function(e,t,n){Cut._isNum(n.resizeWidth)&&Cut._isNum(n.resizeHeight)&&(this.resizeWidth(e,n.resizeWidth,n,!0),this.resizeHeight(e,n.resizeHeight,n,!0),t=="out"?e._scaleX=e._scaleY=Math.max(e._scaleX,e._scaleY):t=="in"&&(e._scaleX=e._scaleY=Math.min(e._scaleX,e._scaleY)),e._width=n.resizeWidth/e._scaleX,e._height=n.resizeHeight/e._scaleY)},resizeWidth:function(e,t,n,r){if(n.resizeMode&&!r)return;e._scaleX=t/e._width_,e._width=e._width_,e._transform_flag=!0},resizeHeight:function(e,t,n,r){if(n.resizeMode&&!r)return;e._scaleY=t/e._height_,e._height=e._height_,e._transform_flag=!0},scaleMode:function(e,t,n){Cut._isNum(n.scaleWidth)&&Cut._isNum(n.scaleHeight)&&(this.scaleWidth(e,n.scaleWidth,n,!0),this.scaleHeight(e,n.scaleHeight,n,!0),t=="out"?e._scaleX=e._scaleY=Math.max(e._scaleX,e._scaleY):t=="in"&&(e._scaleX=e._scaleY=Math.min(e._scaleX,e._scaleY)))},scaleWidth:function(e,t,n,r){if(n.scaleMode&&!r)return;e._scaleX=t/e._width_,e._transform_flag=!0},scaleHeight:function(e,t,n,r){if(n.scaleMode&&!r)return;e._scaleY=t/e._height_,e._transform_flag=!0}},Cut.Matrix=function(e,t,n,r,i,s){this.changed=!0,this.a=e||1,this.b=t||0,this.c=n||0,this.d=r||1,this.tx=i||0,this.ty=s||0},Cut.Matrix.prototype.toString=function(){return"["+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.tx+", "+this.ty+"]"},Cut.Matrix.prototype.clone=function(){return new Cut.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)},Cut.Matrix.prototype.copyTo=function(e){return e.copyFrom(this),this},Cut.Matrix.prototype.copyFrom=function(e){return this.changed=!0,this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Cut.Matrix.prototype.identity=function(){return this.changed=!0,this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Cut.Matrix.prototype.rotate=function(e){if(!e)return this;this.changed=!0;var t=e?Math.cos(e):1,n=e?Math.sin(e):0,r=t*this.a-n*this.b,i=t*this.b+n*this.a,s=t*this.c-n*this.d,o=t*this.d+n*this.c,u=t*this.tx-n*this.ty,a=t*this.ty+n*this.tx;return this.a=r,this.b=i,this.c=s,this.d=o,this.tx=u,this.ty=a,this},Cut.Matrix.prototype.translate=function(e,t){return!e&&!t?this:(this.changed=!0,this.tx+=e,this.ty+=t,this)},Cut.Matrix.prototype.scale=function(e,t){return!(e-1)&&!(t-1)?this:(this.changed=!0,this.a*=e,this.b*=t,this.c*=e,this.d*=t,this.tx*=e,this.ty*=t,this)},Cut.Matrix.prototype.skew=function(e,t){return!e&&!t?this:(this.changed=!0,this.a+=this.b*t,this.d+=this.c*e,this.b+=this.a*e,this.c+=this.d*t,this.tx+=this.ty*t,this.ty+=this.tx*e,this)},Cut.Matrix.prototype.concat=function(e){this.changed=!0;var t=this.a*e.a+this.b*e.c,n=this.b*e.d+this.a*e.b,r=this.c*e.a+this.d*e.c,i=this.d*e.d+this.c*e.b,s=this.tx*e.a+e.tx+this.ty*e.c,o=this.ty*e.d+e.ty+this.tx*e.b;return this.a=t,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this},Cut.Matrix.prototype.reverse=function(){if(this.changed){this.changed=!1,this.reversed=this.reversed||new Cut.Matrix;var e=this.a*this.d-this.b*this.c;this.reversed.a=this.d/e,this.reversed.b=-this.b/e,this.reversed.c=-this.c/e,this.reversed.d=this.a/e,this.reversed.tx=(this.c*this.ty-this.tx*this.d)/e,this.reversed.ty=(this.tx*this.b-this.a*this.ty)/e}return this.reversed},Cut.Matrix.prototype.map=function(e,t){return t=t||{},t.x=this.a*e.x+this.c*e.y+this.tx,t.y=this.b*e.x+this.d*e.y+this.ty,t},Cut.Matrix.prototype.mapX=function(e,t){return this.a*e+this.c*t+this.tx},Cut.Matrix.prototype.mapY=function(e,t){return this.b*e+this.d*t+this.ty},Cut.Math={},Cut.Math.random=function(e,t){return arguments.length==0?(t=1,e=0):arguments.length==1&&(t=e,e=0),e==t?e:Math.random()*(t-e)+e},Cut.Math.rotate=function(e,t,n){return arguments.length<3&&(n=t||0,t=0),n>t?(e=(e-t)%(n-t),e+(e<0?n:t)):(e=(e-n)%(t-n),e+(e<=0?t:n))},Cut.Math.length=function(e,t){return Math.sqrt(e*e+t*t)},Cut._TS=0,Cut._isCut=function(e){return e instanceof Cut},Cut._isNum=function(e){return typeof e=="number"},Cut._isFunc=function(e){return typeof e=="function"},Cut._isArray="isArray"in Array?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},Cut._extend=function(e,t,n){if(n)for(var r=0;r<n.length;r++){var i=n[r];e[i]=t[i]}else for(var i in t)e[i]=t[i];return e},Cut._now=function(){return typeof performance!="undefined"&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return+(new Date)}}(),Cut._function=function(e){return typeof e=="function"?e:function(){return e}},Cut._status=function(e){if(!Cut._statusbox){var t=Cut._statusbox=document.createElement("div");t.style.position="absolute",t.style.color="black",t.style.background="white",t.style.zIndex=999,t.style.top="5px",t.style.right="5px",t.style.padding="1px 5px",document.body.appendChild(t)}Cut._statusbox.innerHTML=e},define("cut-core",function(){}),DEBUG=!0,Cut.prototype.spy=function(e){return arguments.length?(this._spy=e?!0:!1,this):this._spy},Cut.Mouse={CLICK:"click",START:"touchstart mousedown",MOVE:"touchmove mousemove",END:"touchend mouseup"},Cut.Mouse.subscribe=function(e,t,n){function h(e){g(e,t),DEBUG&&console.log("Mouse Start: "+e.type+" "+f),!n&&t.addEventListener(o,d),e.preventDefault(),m(e.type,e),c.x=f.x,c.y=f.y,c.state=1}function p(e){try{DEBUG&&console.log("Mouse End: "+e.type+" "+f),!n&&t.removeEventListener(o,d),e.preventDefault(),m(e.type,e),c.state==1&&c.x==f.x&&c.y==f.y?(DEBUG&&console.log("Mouse Click [+]"),m("click",e),c.state=2):c.state=0}catch(r){console&&console.log(r)}}function d(e){try{g(e,t),e.preventDefault(),m(e.type,e)}catch(n){console&&console.log(n)}}function v(e){try{g(e,t),DEBUG&&console.log("Mouse Click: "+e.type+" "+f),e.preventDefault(),c.state!=2?m(e.type,e):DEBUG&&console.log("Mouse Click [-]")}catch(n){console&&console.log(n)}}function m(t,n){f.type=t,f.event=n,l.x=f.x,l.y=f.y,e.visit(a)}function g(t,n){var r=!1;if(t.touches){if(!t.touches.length)return;r=!0,f.x=t.touches[0].pageX,f.y=t.touches[0].pageY}else f.x=t.clientX,f.y=t.clientY,!document.body.scrollLeft&&!document.body.scrollTop&&document.documentElement&&(f.x+=document.documentElement.scrollLeft,f.y+=document.documentElement.scrollTop);f.x-=n.clientLeft||0,f.y-=n.clientTop||0;var i=n;while(i)f.x-=i.offsetLeft||0,f.y-=i.offsetTop||0,r||(f.x+=i.scrollLeft||0,f.y+=i.scrollTop||0),i=i.offsetParent;f.x*=e.ratio||1,f.y*=e.ratio||1}t=t||document;var r="ontouchstart"in window,i="click",s=r?"touchstart":"mousedown",o=r?"touchmove":"mousemove",u=r?"touchend":"mouseup";t.addEventListener(i,v),t.addEventListener(s,h),t.addEventListener(u,p),n&&t.addEventListener(o,d);var a=null,f={x:0,y:0,toString:function(){return(this.x|0)+"x"+(this.y|0)}},l={x:0,y:0,toString:function(){return f+" / "+(this.x|0)+"x"+(this.y|0)}},c={x:0,y:0,state:0};a={reverse:!0,visible:!0,start:function(t){if(!t.spy()&&e!==t){t.matrix().reverse().map(f,l);if(l.x<0||l.x>t._pin._width||l.y<0||l.y>t._pin._height)return!0}},end:function(e){var t=e.listeners(f.type);if(t){e.matrix().reverse().map(f,l);for(var n=0;n<t.length;n++)if(t[n].call(e,f.event,l))return!0}}}},define("cut-mouse",function(){}),DEBUG=(typeof DEBUG=="undefined"||DEBUG)&&console,window.addEventListener("load",function(){DEBUG&&console.log("On load."),Cut.Loader.start()},!1),Cut.Loader={start:function(){if(this.started)return;this.started=!0,Cut.Loader.play()},play:function(){this.played=!0;for(var e=this.loaders.length-1;e>=0;e--)this.roots.push(this.loaders[e]()),this.loaders.splice(e,1)},pause:function(){for(var e=this.loaders.length-1;e>=0;e--)this.roots[e].pause()},resume:function(){for(var e=this.loaders.length-1;e>=0;e--)this.roots[e].resume()},loaders:[],roots:[],load:function(e,t){function n(){function f(){DEBUG&&console.log("Images loaded."),n=t.getContext("2d");var r=window.devicePixelRatio||1,i=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;o=r/i,t.resize=l,DEBUG&&console.log("Loading..."),e(u,t),l(),window.addEventListener("resize",l,!1),DEBUG&&console.log("Start playing..."),u.start()}function l(){r?(i=window.innerWidth>0?window.innerWidth:screen.width,s=window.innerHeight>0?window.innerHeight:screen.height,t.style.width=i+"px",t.style.height=s+"px"):(i=t.clientWidth,s=t.clientHeight),i*=o,s*=o,t.width=i,t.height=s,u.ratio=o,DEBUG&&console.log("Resize: "+i+" x "+s+" / "+o),u.visit({start:function(e){var t=!0,n=e.listeners("viewport");if(n)for(var r=0;r<n.length;r++)t&=!n[r].call(e,i,s);return t}})}var n=null,r=!1,i=0,s=0,o=1;DEBUG&&console.log("Creating root...");var u=Cut.root(requestAnimationFrame,function(){n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i,s),this.render(n)});typeof t=="string"&&(t=document.getElementById(t)),t||(t=document.getElementById("cutjs"));if(!t){r=!0,DEBUG&&console.log("Creating element..."),t=document.createElement("canvas"),t.style.position="absolute";var a=document.body;a.insertBefore(t,a.firstChild)}return DEBUG&&console.log("Loading images..."),Cut.loadImages(function(e,t,n){var r=new Image;return DEBUG&&console.log("Loading image: "+e),r.onload=t,r.onerror=n,r.src=e,r},f),u}this.played?this.roots.push(n()):this.loaders.push(n)}},!function(){var e=["ms","moz","webkit","o"];for(var t=0;t<e.length&&!window.requestAnimationFrame;t++){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){var r=0;window.requestAnimationFrame=function(e){var t=(new Date).getTime();return r=Math.max(r+16,t),window.setTimeout(function(){e(r)},r-t)}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),define("cut-loader",function(){}),Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=this,n=Array.prototype.slice.call(arguments,1),r=function(){},i=function(){return t.apply(this instanceof r&&e?this:e,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),typeof Object.create!="function"&&function(){var e=function(){};Object.create=function(t){if(arguments.length>1)throw Error("Second argument not supported!");if(t===null||typeof t!="object")throw Error("Invalid prototype!");return e.prototype=t,new e}}(),define("polyfills",function(){});var Extra=Extra||{},X=Extra;Extra.Pool=Pool=function(e,t,n,r){var i=[],s=4,o="",u=0,a=0,f=0,l=0;this.create=function(t){return e=t,this},this.exit=function(e){return t=func,this},this.enter=function(e){return n=func,this},this.discard=function(e){return r=e,this},this.max=function(e){return arguments.length?(s=e,this):s},this.name=function(e){return arguments.length?(o=e,this):o},this.checkOut=function(n){var r;return i.length?r=i.shift():(u++,r=(n||e).apply(this)),a++,t&&t.call(this,r),r},this.checkIn=function(e,t){i.length<s?(f++,n&&n.call(this,e),i.push(e)):(l++,(t=t||r)&&t.call(this,e))},this.toString=function(){return"Pool ("+o+"):"+" +"+u+" >"+a+" <"+f+" -"+l+" ="+i.length+"/"+s}},define("pool",function(){});var Extra=Extra||{},X=Extra;Extra.Randomize=Randomize=function(){this._options=[],this._nope=null,this._map=function(e){return e}},Randomize.prototype.reset=function(){return this._reset&&this._reset(),this},Randomize.prototype.map=function(e){return this._map=e||function(e){return e},this},Randomize.prototype.nope=function(e){return arguments.length?(this._nope=e,this):this._nope},Randomize.prototype.add=function(e,t,n){return this._options.push([e,Randomize._numbor(t,1)]),n&&(this._lock=e),this},Randomize.prototype.select=function(e){return this._map(this._options[e][0])},Randomize.prototype.random=function(){if(this._lock)return this._map(this._lock);var e=0;for(var t=0;t<this._options.length;t++){var n=this._options[t];n[2]=n[1].apply(null,arguments),e+=n[2]}var r=Math.random()*e,i=this._nope;for(var t=0;t<this._options.length;t++){var n=this._options[t];if((r-=n[2])<0){i=n[0];break}}return this._map(i)},Randomize.prototype.condition=function(e,t){return this._condition=e,this._reset=t,this},Randomize.prototype.test=function(){this._test=this._condition?this._condition.apply(null,arguments):null;if(!this._tested){var e=this;this._tested={random:function(){var t=e._test;return e._test=null,t===!1?e._map(e._nope):e.random.apply(e,arguments)}}}return this._tested},Randomize.prototype.spacing=function(e,t){e=Randomize._numbor(e,1);var n=t;return this.condition(function(t){return t=arguments.length?t:1,typeof n!="number"?(n=e.apply(null,arguments),!1):(n-=t)<0?(n=e.apply(null,arguments),!0):!1},function(){n=null}),this},Randomize.prototype.prob=function(e){return e=Randomize._numbor(e,1),this.condition(function(){return Math.random()<e()}),this},Randomize._numbor=function(e,t){return typeof e=="function"?e:(typeof e!="number"&&(e=t),function(){return e})},define("randomize",function(){}),Cut.p2=function(e,t){return new Cut.P2(e,t)},Cut.P2=function(e,t){Cut.P2.prototype._super.apply(this,arguments);var n=this;this.world=e,t=t||{},this.debug=t.debug||!1,this.ratio=t.ratio||128,this.maxSubSteps=t.maxSubSteps||3,this.timeStep=t.timeStep||1/60,this.lineWidth="lineWidth"in t?Cut._function(t.lineWidth):Cut._function(.025),this.lineColor="lineColor"in t?Cut._function(t.lineColor):Cut._function("#000000"),this.fillColor="fillColor"in t?Cut._function(t.fillColor):Cut._function(Cut.P2.randomColor),e.on("addBody",function(e){n.addRenderable(e.body)}).on("removeBody",function(e){n.removeRenderable(e.body)}).on("addSpring",function(e){n.addRenderable(e.spring)}).on("removeSpring",function(e){n.removeRenderable(e.spring)}),this.drawContacts=!1,this.toggleContact=function(e){return arguments.length?this.drawContacts=e:this.drawContacts=!this.drawContacts,this};for(var r=0;r<e.bodies.length;r++)this.addRenderable(e.bodies[r]);for(var r=0;r<e.springs.length;r++)this.addRenderable(e.springs[r]);this.tick(function(e){this.step(1/60,e/1e3)}),this.tempv=p2.vec2.fromValues(0,0)},Cut.P2.prototype=Cut._create(Cut.prototype),Cut.P2.prototype._super=Cut,Cut.P2.prototype.constructor=Cut.P2,Cut.P2.prototype.step=function(e){this.world.step(this.timeStep,e,this.maxSubSteps);for(var t=0;t<this.world.bodies.length;t++){var n=this.world.bodies[t];n.ui&&n.ui.pin({offsetX:n.position[0],offsetY:-n.position[1],rotation:-n.angle})}for(var t=0;t<this.world.springs.length;t++){var r=this.world.springs[t];r.getWorldAnchorA(this.tempv);var i=this.tempv[0],s=this.tempv[1];r.getWorldAnchorB(this.tempv);var o=this.tempv[0],u=this.tempv[1],a=(i+o)/2,f=(s+u)/2,l=i-o,c=s-u,h=Math.atan2(l,c)+Math.PI/2,p=Cut.Math.length(l,c)/r.restLength;r.ui.pin({offsetX:a,offsetY:-f,scaleX:p,rotation:h})}},Cut.P2.prototype.addRenderable=function(e){if(!this.debug&&typeof e.ui!="undefined"){e.ui&&e.ui.appendTo(this);return}e.ui=Cut.create().appendTo(this);if(e instanceof p2.Body&&e.shapes.length)if(e.concavePath&&!this.debugPolygons){var t=this.drawConvex(e.concavePath);Cut.image(t).appendTo(e.ui).pin({handle:.5,offsetX:e.shapeOffsets[n]?e.shapeOffsets[n][0]:0,offsetY:-(e.shapeOffsets[n]?e.shapeOffsets[n][1]:0),rotation:-e.shapeAngles[n]||0})}else for(var n=0;n<e.shapes.length;n++){var r=e.shapes[n],t=null;r instanceof p2.Circle?t=this.drawCircle(r.radius):r instanceof p2.Particle?t=this.drawCircle(2*this.lineWidth(),{lineColor:"",fillColor:this.lineColor()}):r instanceof p2.Plane?t=this.drawPlane(-10,10,10):r instanceof p2.Line?t=this.drawLine(r.length):r instanceof p2.Rectangle?t=this.drawRectangle(r.width,r.height):r instanceof p2.Capsule?t=this.drawCapsule(r.length,r.radius):r instanceof p2.Convex&&r.vertices.length&&(t=this.drawConvex(r.vertices)),Cut.image(t).appendTo(e.ui).pin({handle:.5,offsetX:e.shapeOffsets[n]?e.shapeOffsets[n][0]:0,offsetY:-(e.shapeOffsets[n]?e.shapeOffsets[n][1]:0),rotation:-e.shapeAngles[n]||0})}else if(e instanceof p2.Spring){var t=this.drawSpring(e.restLength);Cut.image(t).appendTo(e.ui).pin({handle:.5})}},Cut.P2.prototype.removeRenderable=function(e){e.ui&&(e.ui.drop?e.ui.drop():e.ui.remove())},Cut.P2.prototype.drawLine=function(e,t){t=this.options(t);var n=t.lineWidth*2,r=t.lineColor,i=t.fillColor;return Cut.Out.drawing(e+2*n,n,this.ratio,function(t,i){t.scale(i,i),t.moveTo(n,n/2),t.lineTo(n+e,n/2),t.lineWidth=n,t.lineCap="round",t.strokeStyle=r,t.stroke()})},Cut.P2.prototype.drawRectangle=function(e,t,n){n=this.options(n);var r=n.lineWidth,i=n.lineColor,s=n.fillColor,o=e+2*r,u=t+2*r;return Cut.Out.drawing(o,u,this.ratio,function(n,o){n.scale(o,o),n.beginPath(),n.rect(r,r,e,t),s&&(n.fillStyle=s,n.fill()),n.lineWidth=r,n.strokeStyle=i,n.stroke()})},Cut.P2.prototype.drawCircle=function(e,t){t=this.options(t);var n=t.lineWidth,r=t.lineColor,i=t.fillColor,s=e*2+n*2,o=e*2+n*2;return Cut.Out.drawing(s,o,this.ratio,function(t,u){t.scale(u,u),t.beginPath(),t.arc(s/2,o/2,e,0,2*Math.PI),i&&(t.fillStyle=i,t.fill()),t.moveTo(e+n,e+n),t.lineTo(n,e+n),t.lineWidth=n,t.strokeStyle=r,t.stroke()})},Cut.P2.prototype.drawCapsule=function(e,t,n){n=this.options(n);var r=n.lineWidth,i=n.lineColor,s=n.fillColor,o=e+2*t+2*r,u=2*t+2*r;return Cut.Out.drawing(o,u,this.ratio,function(n,o){n.scale(o,o),n.beginPath(),n.moveTo(t+r,r),n.lineTo(e+t+r,r),n.arc(e+t+r,t+r,t,-Math.PI/2,Math.PI/2),n.lineTo(t+r,2*t+r),n.arc(t+r,t+r,t,Math.PI/2,-Math.PI/2),n.closePath(),s&&(n.fillStyle=s,n.fill()),n.lineWidth=r,n.strokeStyle=i,n.stroke()})},Cut.P2.prototype.drawSpring=function(e,t){t=this.options(t);var n=t.lineWidth,r=t.lineColor,i=t.fillColor;e=Math.max(e,n*10);var s=12,o=e/s,u=.2*e;return Cut.Out.drawing(e,u*2,this.ratio,function(t,i){t.scale(i,i),t.lineWidth=n,t.strokeStyle=r,t.lineJoin="round",t.moveTo(0,u);for(var a=1;a<s;a++){var f=o*a,l=u;a<=1||a>=s-1||(a%2===0?l-=u/2:l+=u/2),t.lineTo(f,l)}t.lineTo(e,u),t.stroke()})},Cut.P2.prototype.drawPlane=function(e,t,n,r){r=this.options(r);var i=r.lineWidth,s=r.lineColor,o=r.fillColor;return Cut.Out.drawing(n*2,n*2,this.ratio,function(e,t){e.scale(t,t),o&&(e.beginPath(),e.rect(0,n,2*n,2*n),e.fillStyle=o,e.fill(),e.closePath()),e.beginPath(),e.moveTo(0,n),e.lineTo(2*n,n),e.lineWidth=i,e.lineCap="round",e.strokeStyle=s,e.setLineDash&&e.setLineDash([.12,.06]),e.mozDash=[.12,.06],e.stroke()})},Cut.P2.prototype.drawConvex=function(e,t){t=this.options(t);var n=t.lineWidth,r=t.lineColor,i=t.fillColor;if(!e.length)return;var s=0,o=0;for(var u=0;u<e.length;u++){var a=e[u],f=a[0],l=-a[1];s=Math.max(Math.abs(f),s),o=Math.max(Math.abs(l),o)}var c=Cut.Out.drawing(2*s+2*n,2*o+2*n,this.ratio,function(t,u){t.scale(u,u),t.beginPath();for(var a=0;a<e.length;a++){var f=e[a],l=f[0]+s+n,c=-f[1]+o+n;a==0?t.moveTo(l,c):t.lineTo(l,c)}e.length>2&&t.closePath(),i&&(t.fillStyle=i,t.fill(),t.closePath()),t.lineWidth=n,t.lineCap="round",t.strokeStyle=r,t.stroke()});return c},Cut.P2.prototype.options=function(e){return e=typeof e=="object"?e:{},e.lineWidth=e.lineWidth||this.lineWidth(),e.lineColor=e.lineColor||this.lineColor(),e.fillColor=e.fillColor||this.fillColor(),e},Cut.P2.randomColor=function(){var e=Cut.Math.random(192,256)|0,t=Cut.Math.random(192,256)|0,n=Cut.Math.random(192,256)|0;return"#"+e.toString(16)+t.toString(16)+n.toString(16)},define("cut-p2",function(){});var Timer=function(){var e=0,t={};return{once:function(e,t){return this.repeat(e,t,1)},repeat:function(e,t,n){return n=arguments.length>2?n:Infinity,this.set({callback:e,repeat:n,delay:t})},set:function(n){if(n.repeat>0){var r=++e;t[r]=n;if(typeof n.delay!="function"){var i=n.delay;n.delay=function(){return i}}return n.time=n.time||n.delay(),n.repeat=n.repeat||1,r}throw"Invalid repeat number: "+n.repeat},clear:function(e){delete t[e]},tick:function(e){for(var n in t){var r=t[n];r.time-=e,r.time<=0&&(--r.repeat<=0?this.clear(n):r.time=r.delay(),r.callback())}}}}();define("timer",function(){});var P2_DEBUG=!1,p2s=.1,ppu=16/p2s;Cut.Loader.load(function(e,t){function g(){return(12+c*.04)*p2s}function y(){return 8e3-20*c}function A(e){var t=new p2.Body({mass:1});return e&&(t.position=e),t.damping=0,t.angularDamping=0,t.addShape(u.ball),t.isBall=!0,t.ui=Cut.image("base:ball",10).pin("handle",.5),t}function O(e){var t=new p2.Body({mass:1});return t.addShape(u.drop),t.isDrop=e,t.ui=Cut.image("base:"+e).pin("handle",.5),t}function M(e,t,n){var r=new p2.Body({mass:0});return n&&(r.position=n),r.addShape(t),r.isBrick=!0,r.ui=Cut.image("base:b"+e).pin("handle",.5),r.ui.drop=function(){this.tween(70).pin("alpha",0).then(function(){this.remove()})},r.motionState=p2.Body.STATIC,r}function _(){for(var e=0;e<b.bodies.length;e++)if(b.bodies[e].isBrick)return b.bodies[e]}function D(){for(var e=0;e<b.bodies.length;e++)if(b.bodies[e].isBall)return b.bodies[e]}function P(){H()}function H(){o.score.setValue(c),o.max.setValue(p)}function j(){d=!1,P(),p=Math.max(p,c);try{localStorage.setItem(r,p)}catch(e){}for(var t=b.bodies.length-1;t>=0;t--)b.bodies[t].isBall&&b.removeBody(b.bodies[t]);L.current.ui.hide(),F(!0)}function F(t){c=0,h=1,Timer.clear(f.brick);try{p=p||localStorage.getItem(r)||0}catch(n){}t?(o.restart.appendTo(e),o.p2.tween(100).clear().pin("alpha",.5),B=function(){o.p2.tween(100).clear().pin("alpha",1),o.restart.remove(),I(),q(),R()}):(q(),B=R)}function I(){Timer.clear(f.mini);for(var e=b.bodies.length-1;e>=0;e--)(b.bodies[e].isBrick||b.bodies[e].isBall||b.bodies[e].isDrop)&&b.removeBody(b.bodies[e])}function q(){P(),L.set(L.full),L.current.ui.show(),b.addBody(A([0,-5*p2s])),U()+U()+U()}function R(){var e=D(),t=Math.PI*n.random(-0.2,.2);e.velocity=[g()*Math.sin(t),g()*Math.cos(t)],f.brick=Timer.repeat(U,y()),d=!0}function U(){var e=!1;for(var t=0;t<b.bodies.length;t++){var n=b.bodies[t];n.isBrick&&(n.position[1]-=2*p2s,e=e||n.position[1]<-10*p2s)}for(var t=0;t<7;t++){var r=l.bricks.test().random();r&&r((t-3)*2*p2s,9*p2s)}e&&j()}Cut.Mouse.subscribe(e,t,!0);var n=Cut.Math,r="breakout-v1",i=2,s=2.6,o={},u={},a={},f={},l={},c=0,h=1,p=0,d=!1;e.viewbox(i*ppu,s*1.12*ppu).pin("offsetY",-s*.04*ppu).pin("align",-0.5),e.MAX_ELAPSE=180;var v=20*p2s,m=-6*p2s;l.color=(new X.Randomize).add("b").add("r").add("y").add("g").add("p"),l.bricks=(new X.Randomize).add(function(e,t){var n=l.color.random();b.addBody(M(n,u.brick,[e,t]))},function(){return c+1}).add(function(e,t){var n=l.color.random();b.addBody(M(n+"s",u.smallbrick,[e+.5*p2s,t+.5*p2s])),b.addBody(M(n+"s",u.smallbrick,[e-.5*p2s,t+.5*p2s])),b.addBody(M(n+"s",u.smallbrick,[e+.5*p2s,t-.5*p2s])),b.addBody(M(n+"s",u.smallbrick,[e-.5*p2s,t-.5*p2s]))},function(){return Math.max(0,c*1.1-60)}).prob(.9),l.drop=(new X.Randomize).add("+",.6).add("-",.4).prob(.1);var b=new p2.World({gravity:[0,0],defaultFriction:0});b.solver.stiffness=Number.MAX_VALUE,a.ball=new p2.Material,a.wall=a.brick=a.paddle=new p2.Material,b.addContactMaterial(new p2.ContactMaterial(a.ball,a.wall,{restitution:1})),u.vwall=new p2.Line(25*p2s,1*p2s),u.vwall.material=a.wall,u.hwall=new p2.Line(18*p2s,1*p2s),u.hwall.material=a.wall,u.ball=new p2.Circle(.5*p2s),u.ball.material=a.ball,u.brick=new p2.Rectangle(1.9*p2s,1.9*p2s),u.brick.material=a.brick,u.smallbrick=new p2.Rectangle(.9*p2s,.9*p2s),u.smallbrick.material=a.brick,u.drop=new p2.Circle(.3*p2s),u.paddleFull=new p2.Convex([[.18,-0.01],[.18,.01],[.12,.04],[.04,.06],[-0.04,.06],[-0.12,.04],[-0.18,.01],[-0.18,-0.01]]),u.paddleFull.material=a.paddle,u.paddleMini=new p2.Convex([[.12,-0.01],[.12,.01],[.09,.04],[.02,.06],[-0.02,.06],[-0.09,.04],[-0.12,.01],[-0.12,-0.01]]),u.paddleMini.material=a.paddle;var w=1,E=2,S=4,x=8;u.vwall.collisionGroup=E,u.hwall.collisionGroup=E,u.paddleFull.collisionGroup=E,u.paddleMini.collisionGroup=E,u.brick.collisionGroup=S,u.smallbrick.collisionGroup=S,u.ball.collisionGroup=w,u.drop.collisionGroup=x,u.vwall.collisionMask=w,u.hwall.collisionMask=w|x,u.brick.collisionMask=w,u.smallbrick.collisionMask=w,u.paddleFull.collisionMask=w|x,u.paddleMini.collisionMask=w|x,u.ball.collisionMask=E|S,u.drop.collisionMask=E;var T=new p2.Body({position:[9*p2s,-0.5*p2s],angle:Math.PI/2,mass:0});T.addShape(u.vwall),T.ui=null,b.addBody(T);var N=new p2.Body({position:[-9*p2s,-0.5*p2s],angle:Math.PI/2,mass:0});N.addShape(u.vwall),N.ui=null,b.addBody(N);var C=new p2.Body({position:[0,12*p2s],mass:0});C.addShape(u.hwall),C.ui=null,b.addBody(C);var k=new p2.Body({position:[0,-13*p2s],mass:0});k.addShape(u.hwall),k.isBottom=!0,k.ui=null,b.addBody(k);var L={set:function(e){this.current&&(b.removeBody(this.current),e.position[0]=this.current.position[0],e.velocity[0]=this.current.velocity[0]),b.addBody(this.current=e)}};L.full=new p2.Body({position:[0,-10.5*p2s],mass:0}),L.full.paddleWidth=.3,L.full.addShape(u.paddleFull),L.full.isPaddle=!0,L.full.ui=Cut.image("base:paddleFull").pin("handle",.5),L.full.motionState=p2.Body.STATIC,L.mini=new p2.Body({position:[0,-10.5*p2s],mass:0}),L.mini.paddleWidth=.2,L.mini.addShape(u.paddleMini),L.mini.isPaddle=!0,L.mini.ui=Cut.image("base:paddleMini").pin("handle",.5),L.mini.motionState=p2.Body.STATIC,b.on("impact",function(e){var t=e.bodyA,r=e.bodyB,i=t.isBall&&t||r.isBall&&r,s=t.isBrick&&t||r.isBrick&&r,o=t.isBottom&&t||r.isBottom&&r,u=t.isPaddle&&t||r.isPaddle&&r,a=t.isDrop&&t||r.isDrop&&r;if(a){b.removeBody(a);var p;if(u&&(p=D()))if(a.isDrop=="+"){var d=A();d.position[0]=p.position[0],d.position[1]=p.position[1],d.velocity[0]=-p.velocity[0],d.velocity[1]=-p.velocity[1],b.addBody(d)}else setTimeout(function(){L.set(L.mini)},1),Timer.clear(f.mini),f.mini=Timer.once(function(){setTimeout(function(){L.set(L.full)},1)},7500)}if(i){i.velocity[1]>=0?i.velocity[1]=Math.max(i.velocity[1],g()/3):i.velocity[1]=Math.min(i.velocity[1],-g()/3);var v=g()/n.length(i.velocity[0],i.velocity[1]);i.velocity[0]*=v,i.velocity[1]*=v,i.angularVelocity=i.angle=0;if(s){b.removeBody(s),!_()&&U(),c+=h,H();var y=l.drop.test().random();y&&(y=O(y),y.position[0]=s.position[0],y.position[1]=s.position[1],y.velocity[1]=m,b.addBody(y))}else u?h=1:o&&(b.removeBody(i),!D()&&j())}});var B;e.on(Cut.Mouse.START,function(){var e=B;B=null,e&&e()}),e.tick(function(e){if(d){var t=!0;for(var n=b.bodies.length-1;n>=0;n--){var r=b.bodies[n];Math.abs(r.position[0])>i/2||Math.abs(r.position[1])>s/2?(b.removeBody(r),removed=!0):r.isBall&&(t=!1)}t&&j()}Timer.tick(e)}),o.bg=Cut.image("bg:prerendered").appendTo(e).pin("handle",.5).pin("scale",ppu).spy(!0),o.p2=Cut.p2(b,{lineWidth:.01,lineColor:"#888",ratio:256,debug:P2_DEBUG}).appendTo(o.bg).pin("align",.5);var z=0;o.p2.spy(!0).on([Cut.Mouse.START,Cut.Mouse.MOVE],function(e,t){z=t.x}),e.tick(function(e){if(L.current){var t=Math.max(L.current.paddleWidth/2-9*p2s,Math.min(-L.current.paddleWidth/2+9*p2s,z)),n=L.current.position[0]-t;if(Math.abs(n)>.001){var r=v*e/1e3;L.current.position[0]-=Math.max(-r,Math.min(r,n))}}}),o.max=Cut.string("base:d_").appendTo(o.bg).pin({alignX:1,alignY:1,offsetX:-1.5*p2s,offsetY:-0.5*p2s}),o.score=Cut.string("base:d_").appendTo(o.bg).pin({alignX:0,alignY:1,offsetX:1.5*p2s,offsetY:-0.5*p2s}),o.restart=Cut.image("base:restart").pin({handle:.5,offsetY:.5*ppu,scale:ppu}),F()}),define("app",function(){}),Cut.addTexture({name:"bg",imagePath:"media/bg.png",imageRatio:2*ppu,ratio:1/ppu,cutouts:[{name:"prerendered",x:0,y:0,width:320,height:416}]}),Cut.addTexture({name:"base",imagePath:"media/base.png",imageRatio:2*ppu,ratio:1/ppu,filter:function(e){return e.y=256-(e.y+e.height),e},cutouts:[{name:"br",x:0,y:0,width:32,height:32},{name:"bg",x:32,y:0,width:32,height:32},{name:"bb",x:64,y:0,width:32,height:32},{name:"by",x:96,y:0,width:32,height:32},{name:"bp",x:128,y:0,width:32,height:32},{name:"brs",x:160,y:0,width:16,height:16},{name:"bgs",x:176,y:0,width:16,height:16},{name:"bbs",x:192,y:0,width:16,height:16},{name:"bys",x:208,y:0,width:16,height:16},{name:"bps",x:224,y:0,width:16,height:16},{name:"paddleFull",x:0,y:32,width:48,height:16},{name:"paddleMini",x:48,y:32,width:32,height:16},{name:"ball",x:80,y:32,width:16,height:16},{name:"+",x:96,y:32,width:16,height:16},{name:"-",x:112,y:32,width:16,height:16},{name:"restart",x:192,y:48,width:64,height:64},{name:"d_0",x:0,y:48,width:16,height:16},{name:"d_1",x:16,y:48,width:16,height:16},{name:"d_2",x:32,y:48,width:16,height:16},{name:"d_3",x:48,y:48,width:16,height:16},{name:"d_4",x:64,y:48,width:16,height:16},{name:"d_5",x:80,y:48,width:16,height:16},{name:"d_6",x:96,y:48,width:16,height:16},{name:"d_7",x:112,y:48,width:16,height:16},{name:"d_8",x:128,y:48,width:16,height:16},{name:"d_9",x:144,y:48,width:16,height:16},{name:"d_ ",x:160,y:48,width:16,height:16}]}),define("textures",function(){}),requirejs.config({paths:{def:"../req/def.dev","cut-core":"bower_components/cutjs/cut-core","cut-mouse":"bower_components/cutjs/cut-mouse","cut-loader":"bower_components/cutjs/cut-loader","cut-p2":"bower_components/cutjs/examples/cut-p2",pool:"bower_components/extrajs/pool",randomize:"bower_components/extrajs/randomize",timer:"bower_components/extrajs/timer",domReady:"../req/bower_components/requirejs-domready/domReady"},shim:{app:{deps:["def","cut-core","cut-loader","cut-mouse","polyfills","pool","randomize","cut-p2"]},"cut-core":{exports:"Cut"},"cut-loader":{deps:["cut-core"]},"cut-mouse":{deps:["cut-core"]},textures:{deps:["cut-core"]}}}),require(["domReady","def","cut-core","cut-mouse","cut-loader","polyfills","pool","randomize","cut-p2","timer","app","textures"],function(e){e(function(){Cut.Loader.start()})}),define("../req/dev",function(){});